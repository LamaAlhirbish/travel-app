var Client=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){"use strict";(function(e){function r(e,t){return e+t}n.d(t,"a",(function(){return r})),e.exports=r}).call(this,n(1)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"submission",(function(){return g})),n.d(t,"differenceInDays",(function(){return y})),n.d(t,"daysLeft",(function(){return m})),n.d(t,"sum",(function(){return $.a}));let r=document.getElementById("cityName"),a=document.getElementById("departureDate"),o=document.getElementById("retrunDate");const i=new Date,l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=document.getElementById("warning"),u=document.querySelector(".tripList"),d=e=>{let t=e.getDate(),n=e.getMonth()+1,r=e.getFullYear();return t<10&&(t="0"+t),n<10&&(n="0"+n),e=`${r}-${n}-${t}`};(()=>{const e=d(i);a.setAttribute("min",e)})();a.addEventListener("input",()=>{console.log("::Min return date value has been updated::");const e=new Date(a.value),t=d(e);o.setAttribute("min",t)});const s=e=>{const t=new Date(e);return`${t.getDate()} ${l[t.getMonth()]} ${t.getFullYear()}`},p=e=>{const t=new Date(e),n=t.getDate();let r;r=1===n?"st":2===n?"nd":3===n?"rd":"th";return`${t.getDate()}<sup>${r}</sup> ${l[t.getMonth()]} ${t.getFullYear()}`},f=(e,t,n)=>{if(15===n)return 15;for(let r=n;r<e.length;r++)if(e[r].valid_date===t)return r;return 15},y=(e,t)=>{e=new Date(e);const n=(t=new Date(t)).getTime()-e.getTime(),r=Math.ceil(n/864e5);return console.log("Difference in days: "+r),r},m=e=>0===e?"today":1===e?"tomorrow":`in ${e} days`,g=async e=>{e.preventDefault();const t=r.value,n=a.value,l=o.value;if(1===((e,t,n)=>""==e||""==t||""==n?(c.innerText="* Please enter the city and the departure date",0):(c.style.display="none",1))(t,n,l)){const e=s(n),r=p(n);console.log("Departure Date: "+e);const a=s(l);console.log("Return Date: "+a),console.log(i),console.log(e),console.log(a);const o=m(y(i,e)),c=(e=>0===e?"You will be back on the same day":1===e?`The trip will take ${e} day`:`The trip will take ${e} days`)(y(e,a)),u=await h("http://api.geonames.org/searchJSON?name_equals=","&username=lliillhhll",t),d={latitude:u.geonames[0].lat,longitude:u.geonames[0].lng},g=await w("https://api.weatherbit.io/v2.0/forecast/daily?lat=","&key=fe2cca109a1843feb206f2111ea294d9&lon=",d.latitude,d.longitude),$=f(g.data,n,0),D=f(g.data,l,$),I=((e,t,n)=>{let r=[];for(let a=t;a<=n;a++)r.push({date:e[a].valid_date,low_temp:e[a].low_temp,max_temp:e[a].max_temp});return r})(g.data,$,D),T=await b("https://pixabay.com/api/?image_type=photo&q=","&key=5247586-0cea9f794014bc37cec4b0622",t);await _("/tripInfo",{country:u.geonames[0].countryName,city_name:g.city_name,weather_array:I,photo:T.hits[0].webformatURL,departure_date:e,HTML_departure_date:r,return_date:a,countdown:o,trip_length:c});v()}},h=async(e,t,n)=>{const r=await fetch(e+n+t);try{return await r.json()}catch(e){console.log("error geonames API ",e)}},w=async(e,t,n,r)=>{const a=await fetch(e+n+t+r);try{return await a.json()}catch(e){console.log("error weatherbit API ",e)}},b=async(e,t,n)=>{const r=await fetch(e+n+t);try{return await r.json()}catch(e){console.log("error pixabay API ",e)}},_=async(e="",t={})=>{const n=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});try{return await n.json()}catch(e){console.log("error POST data ",e)}},v=async()=>{try{const e=await(async()=>{const e=await fetch("/allData");try{return await e.json()}catch(e){console.log("error getData ",e)}})();console.log("::updateUI::");const t=(e=>{const t=document.createElement("ul");for(let n=0;n<e.length;n++){let r=document.createElement("ul");r.setAttribute("class","weatherList"),r.innerHTML=`<li> ${p(e[n].date)} </li>\n                <li> Low ${e[n].low_temp} </li>\n                <li> High ${e[n].max_temp} </li>`,t.appendChild(r)}return t})(e.weather_array),n=`<div id ="outputData">\n            <p id="outputCity"> Your trip to ${e.city_name}, ${e.country} </p>\n            <p> on ${e.HTML_departure_date} </p>\n            <p> You will travel to ${e.city_name} ${e.countdown} </p>\n            <p> ${e.trip_length} </p>\n            <p id="outputWeather"> Typical weather is: </p>\n            <p id="outputTemp"> </p>\n        </div>\n        \n        <div id ="outputImg">\n            <img src="${e.photo}" alt="${e.city_name} id="cityImg">\n        </div>`,r=document.createElement("li");r.setAttribute("class","card"),r.innerHTML=n,u.insertBefore(r,u.firstChild),document.getElementById("outputTemp").appendChild(t);document.querySelector(".card").scrollIntoView()}catch(e){console.log("error updateUI ",e)}};var $=n(0),D=(n(2),n(3),n(4),n(5),n.p+"76de294b80a9a49950945ea5180955be.png");document.getElementById("wallpaper").appendChild(function(){const e=new Image;return e.src=D,e.id="logoImg",e.alt="Travel App logo",e}())}]);